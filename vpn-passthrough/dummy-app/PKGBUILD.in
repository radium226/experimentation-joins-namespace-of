arch=("any")
pkgname="dummy-app"
pkgver="0.1.0"
pkgrel=1

source=(
    "${pkgname//-/_}-${pkgver}.tar.gz"
    "dummy-app.service"
    "config.json"
)

sha256sums=(
  "SKIP"
  "SKIP"
  "SKIP"
)

makedepends=(
    "python-build" 
    "python-installer" 
    "python-wheel"
)

depends=(
    "python"
    "python-click"
)

build() {
    cd "${srcdir}/${pkgname//-/_}-${pkgver}"
    python -m build --wheel --no-isolation
}

package() {
    install -Dm644 "${srcdir}/dummy-app.service" "${pkgdir}/usr/lib/systemd/system/dummy-app.service"
    install -Dm644 "${srcdir}/config.json" "${pkgdir}/etc/dummy-app/config.json"
    
    find "${pkgname//-/_}-${pkgver}" -type "f" -name "*.whl" -exec python -m installer --destdir="${pkgdir}" {} \;
}